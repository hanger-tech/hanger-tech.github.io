<!DOCTYPE html>
<html lang="ja-jp" dir="ltr">
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Apacheで全体の共通設定は主サーバ設定に | Test Site!!!</title>

      <link rel="stylesheet" href="/css/main.min.57cb5aa1f6171fd708dc50d2f9d2c5edd641ce1f2443c479abde3cd08840261a.css" integrity="sha256-V8taofYXH9cI3FDS&#43;dLF7dZBzh8kQ8R5q9480IhAJho=" crossorigin="anonymous">


      <script src="/js/main.23cd0c7d837263b9eaeb96ee2d9ccfa2969daa3fa00fa1c1fe8701a9b87251a1.js" integrity="sha256-I80MfYNyY7nq65buLZzPopadqj&#43;gD6HB/ocBqbhyUaE=" crossorigin="anonymous"></script>


</head>
<body>
  <header>
    <h1>Test Site!!!</h1>

  </header>
  <main>
    
  <h1>Apacheで全体の共通設定は主サーバ設定に</h1>

  
  
  <time datetime="2025-02-05T17:29:33&#43;09:00">February 5, 2025</time>

  <p>.htaccessに書くと処理能力やセキュリティの低下を招く可能性があります。</p>
<p>詳しくはApacheの公式チュートリアルにあります。</p>
<p><a href="https://httpd.apache.org/docs/2.4/ja/howto/htaccess.html#when">Apache チュートリアル（Ver 2.4）</a></p>
<p>公式サイトにも記載がありますが、まず最初に処理能力が低下する理由です。
【AllowOverride】ディレクティブで【.htaccess】を使用出来る状態になってい場合は、Apache は 各ディレクトリで【.htaccess】ファイルを探します。
仮に「/hoge/huga/index.html」へのリクエストがあり【AllowOverride】と【.htaccess】の有効範囲が「/」以下ならば</p>
<pre tabindex="0"><code>/.htaccess
/hoge/.htaccess
/hoge/huga/.htaccess
/hoge/huga/index.html
</code></pre><p>の順に【.htaccess】を読み込みます。</p>
<p>実際に【.htaccess】ファイルがあろうがなかろうが【.htaccess】を有効にしているディレクトリ及びサブディレクトリにアクセスします。特に問題なのは【.htaccess】ファイルがない場合もファイルシステム的にはアクセスするので無駄なオーバーヘッドがあります。</p>
<p>そしてこの処理はリクエストが来るたびに毎回行われます。
デフォルトの【httpd.conf】ファイル上では「/」ディレクティブは【AllowOverride none】となっており通常は、意図的に変更してなければ気にしなくても大丈夫です。</p>
<p>2つ目のセキュリティに関してですが、これは単純で設定ファイルを集約せずに拡散させていると管理が複雑になり何をどう変更して実行しているのかわからなくなるからです。最近は「ロリポップ」や「Freedom Hosting II」へのシンボリックリンク攻撃なども行われています。</p>
<p><a href="https://fumiyas.github.io/2013/09/03/no-followsymlinks-is-not-safe.html">Apache HTTPD: Options -FollowSymLinks は不完全</a></p>
<p><a href="https://it.srad.jp/story/17/02/15/0626201/">Torなどの匿名化技術を使って構築された「ダークウェブ」上のホスティングサービスがハックされデータ流出</a></p>
<p>サーバ共通の設定を主設定、もしくは主設定がインクルードするファイルに設定保存すると、管理も複雑化しにくくなります。</p>
<p>主サーバ設定は起動時に1回だけ読み込まれ、それ以降は読み込まれないので負荷の軽減になります。</p>
  


  </main>
  <footer>
    <p>Copyright 2025. All rights reserved.</p>

  </footer>
</body>
</html>
